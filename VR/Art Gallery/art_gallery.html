<script src="aframe.js"></script>
<script>
    console.clear()
    window.addEventListener('click', () => document.querySelector('#fire').play());
    window.addEventListener('click', () => document.querySelector('#fire2').play());
</script>

<a-scene>

    <a-assets>
        <!-- Assets -->
        <img id="backwalls" src="/assets/art gallery/backwall.png" />
        <img id="floor" src="/assets/art gallery/texture/floor4.png" />
        <img id="sidewalls" src="/assets/art gallery/sidewalls.avif" />

        <video id="fire" src="/assets/art gallery/fireplace.mov" autoplay loop></video>
        <video id="fire2" src="/assets/art gallery/Fire_Wall_1.mp4" autoplay loop></video>

        <img id="clock-texture" src="/assets/art gallery/square-clock.jpeg" />
        <img id="clock-texture2" src="/assets/art gallery/square-clock2.webp" />
        <img id="doorTexture" src="/assets/art gallery/texture/door.png" />
        <img id="doorTexture2" src="/assets/art gallery/texture/door2.png" />
        <img id="banner" src="/assets/art gallery/banner.png" />

        <img id="directionalsign" src="/assets/art gallery/directionalarrow.png" />
        <img id="entrancesign" src="/assets/art gallery/entrance1.png" />
        <img id="exitsign" src="/assets/art gallery/exit1.png" />
        <img id="toiletsign" src="/assets/art gallery/toiletsign.png" />
        <img id="nopetsign" src="/assets/art gallery/nopets.png" />
        <img id="nophoto" src="/assets/art gallery/nophoto.png" />
        <img id="nosmoking" src="/assets/art gallery/nosmoking.png" />
        <img id="notouch" src="/assets/art gallery/notouch.png" />
        <img id="site1_2" src="/assets/art gallery/Site1+2.png" />
        <img id="site3_4" src="/assets/art gallery/Site3+4.png" />

        <img id="painting1" src="/assets/art gallery/painting1.avif" />
        <img id="painting2" src="/assets/art gallery/painting2.avif" />
        <img id="painting3" src="/assets/art gallery/painting3.avif" />
        <img id="painting4" src="/assets/art gallery/painting4.avif" />
        <img id="painting5" src="/assets/art gallery/painting5.avif" />
        <img id="painting6" src="/assets/art gallery/painting6.avif" />
        <img id="painting7" src="/assets/art gallery/painting7.avif" />
        <img id="painting8" src="/assets/art gallery/painting8.avif" />

        <img id="redwood" src="/assets/art gallery/redwood.jpg" />

        <img id="site1" src="/assets/site1.webp" />
        <img id="site2" src="/assets/site2.jpg" />
        <img id="site3" src="/assets/site3.jpg" />
        <img id="site4" src="/assets/site4.jpg" />

        <!-- Models -->
        <a-asset-item id="bench" src="/assets/models/bench.gltf"></a-asset-item>
        <a-asset-item id="cactus" src="/assets/models/Cactus.gltf"></a-asset-item>

        <!-- Mixins -->
        <a-mixin id="s-wall-texture" material="src: #sidewalls; repeat: 8 8; roughness: 0.5;"></a-mixin>
        <a-mixin id="fb-wall-texture" material="src: #backwalls; roughness: 0.5;"></a-mixin>

        <a-mixin id="s-wall" mixin="s-wall-texture" material="src: #backwalls; repeat: 1 1" geometry="primitive: plane; width: 30; height: 10;"></a-mixin>
        <a-mixin id="fb-wall" mixin="fb-wall-texture" geometry="primitive: plane; width: 38; height: 10"></a-mixin>

        <a-mixin id="s1-wall" mixin="s-wall-texture" geometry="primitive: box; width: 30; height: 10; depth: 0.5" material="roughness: 1"></a-mixin>

        <a-mixin id="abslight" geometry="primitive: cylinder; segments-radial: 6; radius: 0.05; height: 2" material="color: white; emissive: white;"></a-mixin>
    </a-assets>

    <!-- Gallery walls, floor & ceiling -->
    <a-plane id="floor" rotation="-90 0 0" width="38" height="30" material="color: silver; src: #floor; repeat: 6 6; roughness: 1; "></a-plane>
    <a-entity id="wall-l" mixin="s-wall" rotation="0 90 0" position="-19 5 0"></a-entity>
    <a-entity id="wall-r" mixin="s-wall" rotation="0 -90 0" position="19 5 0"></a-entity>
    <a-plane id="ceiling" rotation="90 0 0" width="38" height="30" position="0 10 0" material="roughness: 1;"></a-plane>

    <!-- Middle Right Walls -->
    <a-entity id="wall-r2" mixin="s1-wall" rotation="0 -90 0" position="5 8 0" geometry="height:4"></a-entity>
    <a-entity id="wall-r3" mixin="s1-wall" rotation="0 -90 0" position="5 3 8.5" geometry="width: 13; height:6"></a-entity>
    <a-entity id="wall-r4" mixin="s1-wall" rotation="0 -90 0" position="5 3 -8.5" geometry="width: 13; height:6"></a-entity>

    <!-- Middle Left Walls -->
    <a-entity id="wall-l2" mixin="s1-wall" rotation="0 -90 0" position="-5 8 0" geometry="height:4"></a-entity>
    <a-entity id="wall-l3" mixin="s1-wall" rotation="0 -90 0" position="-5 3 8.5" geometry="width: 13; height:6"></a-entity>
    <a-entity id="wall-l4" mixin="s1-wall" rotation="0 -90 0" position="-5 3 -8.5" geometry="width: 13; height:6"></a-entity>

    <!-- Ceiling inset -->
    <a-box width="37" height="0.5" depth="29" position="0 10 0" material="src: #backwalls; roughness: 1;"></a-box>

    <!-- Entrance and Exit -->
    <a-entity id="wall-f1" mixin="fb-wall" rotation="0 -180 0" position="-12 5 15" geometry=" width: 14; height:10"></a-entity>
    <a-entity id="wall-f2" mixin="fb-wall" rotation="0 -180 0" position="12 5 15" geometry=" width: 14; height:10"></a-entity>
    <a-entity id="wall-f3" mixin="fb-wall" rotation="0 -180 0" position="0 8 15" geometry=" width: 10; height:4"></a-entity>
    <a-entity id="wall-f4" mixin="fb-wall" rotation="0 -180 0" position="-3.5 3 15" geometry=" width: 3; height:6"></a-entity>
    <a-entity id="wall-f5" mixin="fb-wall" rotation="0 -180 0" position="3.5 3 15" geometry=" width: 3; height:6"></a-entity>

    <a-box id="entrance-sign" width="4.5" height="1.5" depth="0." position="0 7.5 14.7" src= #entrancesign ></a-box>

    <a-box id="door" position="5 3 0" rotation="0 -90 0" width="4" height="6" depth="0.5" src= #doorTexture2> </a-box>
    <a-box id="hinge" position="5 3.5 2.5" width="0.8" height="0.5" depth="0.5" color="black"
        onclick="toggleDoor()">
    </a-box>

    <a-entity id="wall-b1" mixin="fb-wall" rotation="0 0 0" position="-12 5 -15" geometry=" width: 14; height:10"></a-entity>
    <a-entity id="wall-b2" mixin="fb-wall" rotation="0 0 0" position="12 5 -15" geometry=" width: 14; height:10"></a-entity>
    <a-entity id="wall-b3" mixin="fb-wall" rotation="0 0 0" position="0 8 -15" geometry=" width: 10; height:4"></a-entity>
    <a-entity id="wall-b4" mixin="fb-wall" rotation="0 0 0" position="-3.5 3 -15" geometry=" width: 3; height:6"></a-entity>
    <a-entity id="wall-b5" mixin="fb-wall" rotation="0 0 0" position="3.5 3 -15" geometry=" width: 3; height:6"></a-entity>

    <a-box id="exit-sign" width="4.5" height="1.5" depth="0.3" position="0 7.5 -14.7" src= #exitsign ></a-box>

    <a-box id="door1" position="-5 3 0" rotation="0 -90 0" width="4" height="6" depth="0.5" src= #doorTexture2></a-box>
    <a-box id="hinge1" position="-5 3.5 -2.5" width="0.8" height="0.5" depth="0.5" color="black"
        onclick="toggleDoor2()">
    </a-box>

    <!-- Main Light -->
    <a-entity id="left-room-light1" light="type: point; intensity: 1.3; distance: 22; color: #fff;" position="-12 7 8"></a-entity>
    <a-entity position="-12 9 8" rotation="0 90 0">
        <a-entity line="start: 0 0 0; end: 0 -2 0; color: silver"></a-entity>
        <a-entity mixin="abslight" position="0 -2 0" rotation="60 30 20"></a-entity>
        <a-entity mixin="abslight" position="0 -1.25 0" rotation="20 110 60"></a-entity>
        <a-entity mixin="abslight" position="0 -1.75 0" rotation="70 90 120"></a-entity>
        <a-entity mixin="abslight" position="0 -1 0" rotation="20 60 110"></a-entity>
    </a-entity>

    <a-entity id="left-room-light2" light="type: point; intensity: 1.3; distance: 22; color: #fff;" position="-12 7 -8"></a-entity>
    <a-entity position="-12 9 -8" rotation="0 90 0">
        <a-entity line="start: 0 0 0; end: 0 -2 0; color: silver"></a-entity>
        <a-entity mixin="abslight" position="0 -2 0" rotation="60 30 20"></a-entity>
        <a-entity mixin="abslight" position="0 -1.25 0" rotation="20 110 60"></a-entity>
        <a-entity mixin="abslight" position="0 -1.75 0" rotation="70 90 120"></a-entity>
        <a-entity mixin="abslight" position="0 -1 0" rotation="20 60 110"></a-entity>
    </a-entity>

    <a-entity id="corridor-light1" light="type: point; intensity: 0.9; distance: 18; color: #fff;" position="0 7 8"></a-entity>
    <a-entity position="0 9 8" rotation="0 90 0">
        <a-entity line="start: 0 0 0; end: 0 -2 0; color: silver"></a-entity>
        <a-entity mixin="abslight" position="0 -2 0" rotation="60 30 20"></a-entity>
        <a-entity mixin="abslight" position="0 -1.25 0" rotation="20 110 60"></a-entity>
        <a-entity mixin="abslight" position="0 -1.75 0" rotation="70 90 120"></a-entity>
        <a-entity mixin="abslight" position="0 -1 0" rotation="20 60 110"></a-entity>
    </a-entity>

    <a-entity id="corridor-light2" light="type: point; intensity: 0.9; distance: 18; color: #fff;" position="0 7 -8"></a-entity>
    <a-entity position="0 9 -8" rotation="0 90 0">
        <a-entity line="start: 0 0 0; end: 0 -2 0; color: silver"></a-entity>
        <a-entity mixin="abslight" position="0 -2 0" rotation="60 30 20"></a-entity>
        <a-entity mixin="abslight" position="0 -1.25 0" rotation="20 110 60"></a-entity>
        <a-entity mixin="abslight" position="0 -1.75 0" rotation="70 90 120"></a-entity>
        <a-entity mixin="abslight" position="0 -1 0" rotation="20 60 110"></a-entity>
    </a-entity>

    <a-entity id="right-room-light1" light="type: point; intensity: 1.3; distance: 22; color: #fff;" position="12 7 8"></a-entity>
    <a-entity position="12 9 8" rotation="0 90 0">
        <a-entity line="start: 0 0 0; end: 0 -2 0; color: silver"></a-entity>
        <a-entity mixin="abslight" position="0 -2 0" rotation="60 30 20"></a-entity>
        <a-entity mixin="abslight" position="0 -1.25 0" rotation="20 110 60"></a-entity>
        <a-entity mixin="abslight" position="0 -1.75 0" rotation="70 90 120"></a-entity>
        <a-entity mixin="abslight" position="0 -1 0" rotation="20 60 110"></a-entity>
    </a-entity>

    <a-entity id="right-room-light2" light="type: point; intensity: 1.3; distance: 22; color: #fff;" position="12 7 -8"></a-entity>
    <a-entity position="12 9 -8" rotation="0 90 0">
        <a-entity line="start: 0 0 0; end: 0 -2 0; color: silver"></a-entity>
        <a-entity mixin="abslight" position="0 -2 0" rotation="60 30 20"></a-entity>
        <a-entity mixin="abslight" position="0 -1.25 0" rotation="20 110 60"></a-entity>
        <a-entity mixin="abslight" position="0 -1.75 0" rotation="70 90 120"></a-entity>
        <a-entity mixin="abslight" position="0 -1 0" rotation="20 60 110"></a-entity>
    </a-entity>


    <!-- Site 1 & Site 2 -->
    <a-box id="fireplace-border-left" width="0.1" height="3.7" depth="0.5" position="-19 3 -4.3" material="color: white;" rotation="0 -90 0"></a-box>
    <a-box id="fireplace-border-right" width="0.1" height="3.7" depth="0.5" position="-19 3 4.3" material="color: white;" rotation="0 -90 0"></a-box>
    <a-box id="fireplace-border-top" width="8.7" height="0.1" depth="0.5" position="-19 4.8 0" material="color: white;" rotation="0 90 0"></a-box>
    <a-box id="fireplace-border-bottom" width="8.7" height="0.1" depth="0.5" position="-19 1.2 0" material="color: white;" rotation="0 90 0"></a-box>

    <a-box id="fireplace-left" width="8.5" height="3.5" depth="0.5" position="-19 3 0" material="color: #000;" rotation="0 90 0">
        <a-video src= #fire2 position="0 0 0.255" width="7.4" height="2.4">
            <a-entity id="main-light" light="type: point; color: #ff7700; intensity: 4; distance: 6" position="0 0 0"></a-entity>
        </a-video>
    </a-box>

    <a-entity id="bench-right" gltf-model="#bench" position="-6 0 8.5" rotation="0 0 0" scale="1.2 1.7 1.2"></a-entity>
    <a-entity id="bench-left" gltf-model="#bench" position="-6 0 -8.5" rotation="0 0 0" scale="1.2 1.7 1.2"></a-entity>

    <a-box id="clock" position="-5.3 8 0" width="2.5" height="2.5" depth="0.2" rotation="0 90 0" src= #clock-texture2></a-box>

    <a-box id="middle-left-painting" width="5" height="8.5" depth="0.1" position="-19 5 -10" rotation="0 90 0" src= #painting5></a-box>
    <a-box id="painting5-info" width="1.2" height="1.2" depth="0.1" position="-19 5 -6.7" rotation="0 90 0"></a-box>

    <a-box id="middle-right-painting" width="8" height="6.5" depth="0.1" position="-19 5 10.5" rotation="0 90 0" src= #painting6></a-box>
    <a-box id="painting6-info" width="1.2" height="1.2" depth="0.1" position="-19 5 5.7" rotation="0 90 0"></a-box>

    <a-box id="left-painting" width="10" height="6" depth="0.1" position="-11.5 5 -15" rotation="0 180 0" src= #painting7></a-box>
    <a-box id="painting7-info" width="1.2" height="1.2" depth="0.1" position="-17.3 5 -15" rotation="0 180 0"></a-box>
    
    <a-box id="right-painting" width="6" height="8" depth="0.1" position="-12 5 15" src= #painting8></a-box>
    <a-box id="painting8-info" width="1.2" height="1.2" depth="0.1" position="-15.8 5 15"></a-box>


    <!-- Site 3 & Site  4-->
    <a-box id="fireplace-border-left" width="0.1" height="3.7" depth="0.5" position="19 3 -4.3" material="color: white;" rotation="0 -90 0"></a-box>
    <a-box id="fireplace-border-right" width="0.1" height="3.7" depth="0.5" position="19 3 4.3" material="color: white;" rotation="0 -90 0"></a-box>
    <a-box id="fireplace-border-top" width="8.7" height="0.1" depth="0.5" position="19 4.8 0" material="color: white;" rotation="0 90 0"></a-box>
    <a-box id="fireplace-border-bottom" width="8.7" height="0.1" depth="0.5" position="19 1.2 0" material="color: white;" rotation="0 90 0"></a-box>

    <a-box id="fireplace-right" width="8.5" height="3.5" depth="0.5" position="19 3 0" material="color: #000;" rotation="0 -90 0">
        <a-video src= #fire position="0 0 0.255" width="7.4" height="2.4">
            <!-- <a-entity light="type: point; color: #f70; intensity: 1; distance: 1" position="-2.5 -2.5 2"></a-entity>
            <a-entity light="type: point; color: #ff7700; intensity: 1; distance: 2" position="0 -2.5 2"></a-entity>
            <a-entity light="type: point; color: #f70; intensity: 1; distance: 1" position="2.5 -2.5 2"></a-entity> -->
            <a-entity id="main-light" light="type: point; color: #ff7700; intensity: 4; distance: 6" position="0 0 0"></a-entity>
        </a-video>
    </a-box>
    
    <a-entity id="bench-right" gltf-model="#bench" position="6 0 8.5" rotation="0 0 0" scale="1.2 1.7 1.2"></a-entity>
    <a-entity id="bench-left" gltf-model="#bench" position="6 0 -8.5" rotation="0 0 0" scale="1.2 1.7 1.2"></a-entity>

    <a-box id="clock" position="5.3 8 0" width="2.5" height="2.5" depth="0.2" rotation="0 90 0" src= #clock-texture></a-box>

    <a-box id="middle-left-painting" width="5" height="8.5" depth="0.1" position="19 5 -10" rotation="0 90 0" src= #painting1></a-box>
    <a-box id="painting1-info" width="1.2" height="1.2" depth="0.1" position="19 5 -6.7" rotation="0 90 0"></a-box>

    <a-box id="middle-right-painting" width="8" height="6.5" depth="0.1" position="19 5 10.5" rotation="0 90 0" src= #painting2></a-box>
    <a-box id="painting2-info" width="1.2" height="1.2" depth="0.1" position="19 5 5.7" rotation="0 90 0"></a-box>

    <a-box id="left-painting" width="10" height="6" depth="0.1" position="11.5 5 -15" rotation="0 180 0" src= #painting3></a-box>
    <a-box id="painting3-info" width="1.2" height="1.2" depth="0.1" position="17.3 5 -15" rotation="0 180 0"></a-box>
    
    <a-box id="right-painting" width="6" height="8" depth="0.1" position="12 5 15" src= #painting4></a-box>
    <a-box id="painting4-info" width="1.2" height="1.2" depth="0.1" position="15.8 5 15"></a-box>

    <!-- <a-plane id="window" position="12.5 9 0" rotation="90 0 0" width="9" height="9" material="transparent: true; opacity: 0.7; color:white side: double"></a-plane> -->

    <!-- <a-entity position="15 3 -10">
        <a-link class="link" href="/VR/Site1/site1.html" rotation="0 -45 0" title="Go to site2" side="double" image= #site3 scale="2 2 2"></a-link>
    </a-entity> -->


    <!-- Corridor -->
    <!-- <a-entity id="cactus" gltf-model="#cactus" position="0 2 0" scale="5 5 5"></a-entity> -->
    <a-box id="banner" width="2.5" height="6" depth="0.1" position="-3 2.1 9.5" rotation="0 55 0" src= #banner></a-box>
    <a-sphere id="banner-bottom" scale="1.8 0.3 1" position="-3 0 9.5" rotation="0 55 0"></a-sphere>

    <a-box id="site1_2-sign" width="4" height="2" depth="0.1" position="-4.7 7.5 0" rotation="0 90 0" src= #site1_2 ></a-box>
    <a-box id="site3_4-sign" width="4" height="2" depth="0.1" position="4.7 7.5 0" rotation="0 90 0" src= #site3_4 ></a-box>

    <a-camera look-controls wasd-controls="acceleration: 80" position="0 3 12">
        <a-cursor color="green">
    </a-camera>

</a-scene>

<script>
    function toggleDoor() {
        // Get the door entity and its current position
        var door = document.querySelector('#door');
        var hinge = document.querySelector('#hinge');

        var doorPosition = door.getAttribute('position');
        var hingePosition = door.getAttribute('position');
    
        // Define the original and new positions of the door
        var originalPosition = '5 3 0';
        var newPosition = '5 30 0';

        var hingePosition = '5 3.5 2.5';
    
        // Check if the current position is the original position or the new position
        if (doorPosition.x == originalPosition.split(' ')[0] && 
            doorPosition.y == originalPosition.split(' ')[1] && 
            doorPosition.z == originalPosition.split(' ')[2]) {
            
            hinge.setAttribute('position', hingePosition);
            door.setAttribute('position', newPosition);

        } else {
            hinge.setAttribute('position', hingePosition);
            door.setAttribute('position', originalPosition);
        }
    }

    function toggleDoor2(){
        var door1 = document.querySelector('#door1');
        var hinge = document.querySelector('#hinge1');

        var door1Position = door1.getAttribute('position');
        var hingePosition = door.getAttribute('position');

        var originalPosition1 = '-5 3 0';
        var newPosition1 = '-5 30 0';
        var hingePosition = '-5 3.5 -2.5';

        if (door1Position.x == originalPosition1.split(' ')[0] && 
            door1Position.y == originalPosition1.split(' ')[1] && 
            door1Position.z == originalPosition1.split(' ')[2] ) {

            hinge.setAttribute('position', hingePosition);
            door1.setAttribute('position', newPosition1);

        } else {
            hinge.setAttribute('position', hingePosition);
            door1.setAttribute('position', originalPosition1);
        }
    }

</script>
